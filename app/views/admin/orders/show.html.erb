<h2>注文履歴詳細</h2>
<div class = "container">
  <div class = "rol">
    <div class = "col-md-7">
     <%= render 'admin/orders/status' ,order: @order %>

      <table>
        <tr>
        　<th>商品名</th>
        　<th>単価(税込)</th>
        　<th>数量</th>
        　<th>小計</th>
        　<th>製作ステータス</th>
        </tr>
      <% @order_products.each do |order_product| %>
      <tr>
        <td><%= order_product.product.name %></td>
        <td><%= order_product.product.sum_of_order_price %></td>
        <td><%= order_product.quantity %></td>
        <td><%= order_product.quantity_price %></td>
        <td>
            <%= form_with model:[@order,order_product],url:admin_order_order_product_path(@order,order_product),remote: :true do |f| %>
              <%= f.select :product_status, OrderProduct.production_statuses.keys.map {|k| [I18n.t("enums.order_product.production_status.#{k}"), k]} %>
              <%= f.submit "更新" %>
            <% end %>
        </td>
      </tr>
      <% end %>
      </table>

      <table>
        <tr>
          <th><b>商品合計</b></th>
          <td><%= @order.sum_of_order_price %>円</td>
        </tr>
        <tr>
         <th><b>配送料</b></td>
         <td><%= @order.shipping %>円</td>
      </tr>
      <tr>
         <th><b>ご請求額</b></th>
         <th><%= @order.billing_amount %>円</th>
      </tr>
      </table>
    </div>
  </div>
</div>