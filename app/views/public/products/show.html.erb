<%= render 'layouts/error', obj: @cart_product %>
<div class="container mt-5 mb-5">
  <div class="row">
    <div class="genre-search col-md-3 mb-5">
      <ul class="list-group">
        <li class="list-group-item active" aria-current="true">ジャンル検索</li>
      <% @genres.each do |genre| %>
        <li class="list-group-item"><%= link_to genre.name %></li>
      <% end %>
      </ul>
    </div>

    <div class="col-md-4 col-lg-3 mb-5">
      <%= image_tag @product.get_product_image(300,200), class: "w-100" %>
    </div>

    <div class="col-md-5 col-lg-6 pl-md-4">
      <%= form_with model: @cart_product, url: cart_products_path, method: :post do |f| %>
        <h3 class="font-weight-bold mb-2"><%= @product.name %></h3>
        <p class="mb-4"><%= @product.text %></p>
        <p><strong class="h4">￥<%= @product.sum_of_order_price %></strong>（税込）</p>
        <%= f.hidden_field :product_id, :value => @product.id %>

        <% if @product.sales_status == true %>
          <%= f.select :quantity , *[1..10], { include_blank: "個数選択" }, class: "p-1 form-select" %>
          <%= f.submit "カートに入れる", class: "btn submit ml-md-2 ml-lg-4 shadow-sm" %>
        <% elsif @product.sales_status == false %>
          <h5 class="text-danger ml-3 mt-5"><strong>売切れ</strong></h5>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
